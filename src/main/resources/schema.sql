-- USER
CREATE TABLE "USER" (
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    FIRST_NAME VARCHAR(255) NOT NULL,
    LAST_NAME VARCHAR(255) NOT NULL,
    USERNAME VARCHAR(255) NOT NULL,
    PASSWORD VARCHAR(255) NOT NULL,
    IS_ACTIVE BOOLEAN NOT NULL
);

-- TRAINEE
CREATE TABLE TRAINEE (
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    USER_ID BIGINT NOT NULL,
    DATE_OF_BIRTH DATE,
    ADDRESS VARCHAR(255),
    FOREIGN KEY (USER_ID) REFERENCES "USER" (ID)
);

-- TRAINING_TYPE
CREATE TABLE TRAINING_TYPE (
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    TRAINING_TYPE_NAME VARCHAR(255) NOT NULL
);

-- TRAINER
CREATE TABLE TRAINER (
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    USER_ID BIGINT NOT NULL,
    SPECIALIZATION_ID BIGINT NOT NULL,
    FOREIGN KEY (USER_ID) REFERENCES "USER" (ID),
    FOREIGN KEY (SPECIALIZATION_ID) REFERENCES TRAINING_TYPE(ID)
);

-- TRAINING
CREATE TABLE TRAINING (
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    TRAINEE_ID BIGINT NOT NULL,
    TRAINER_ID BIGINT NOT NULL,
    TRAINING_NAME VARCHAR(255) NOT NULL,
    TRAINING_TYPE_ID BIGINT NOT NULL,
    TRAINING_DATE DATE NOT NULL,
    TRAINING_DURATION INT NOT NULL,
    FOREIGN KEY (TRAINEE_ID) REFERENCES TRAINEE(ID),
    FOREIGN KEY (TRAINER_ID) REFERENCES TRAINER(ID),
    FOREIGN KEY (TRAINING_TYPE_ID) REFERENCES TRAINING_TYPE(ID)
);

-- TRAINEE2TRAINER
CREATE TABLE TRAINEE2TRAINER (
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    TRAINEE_ID BIGINT NOT NULL,
    TRAINER_ID BIGINT NOT NULL,
    FOREIGN KEY (TRAINEE_ID) REFERENCES TRAINEE(ID),
    FOREIGN KEY (TRAINER_ID) REFERENCES TRAINER(ID)
);
